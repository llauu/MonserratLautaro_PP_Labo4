import{a as V,b as c,c as w,d as D,g as T,h as O,i as k,j as q,k as P,l as j,m as A,o as G,q as $}from"./chunk-CZ6RJV6A.js";import{k as F,o as R,p as H,r as z,s as J,t as K}from"./chunk-SENDHDUF.js";import{$a as n,Aa as s,Ba as f,La as x,Na as p,Qa as t,Ra as e,Sa as _,Ta as E,Ua as m,Va as v,ab as C,bb as M,ca as u,gb as h,ka as S,la as g,ra as b,yb as I,zb as N}from"./chunk-BHUJHJEN.js";function L(){return a=>{let o=["agua","crema"];return a.value&&!o.includes(a.value)?{tipoInvalido:!0}:null}}var U=(()=>{let o=class o{constructor(i){this.fb=i,this.heladoCreado=new b,this.form=this.fb.group({sabor:["",[c.required]],tipo:["agua",[c.required,L()]],precio:[0,[c.required,c.min(0)]],peso:[250,[c.required,c.min(250),c.max(1e3)]]})}onSubmit(){this.form.valid&&(this.heladoCreado.emit(this.form.value),this.form.reset({tipo:"agua",precio:0,peso:250}))}};o.\u0275fac=function(r){return new(r||o)(f(G))},o.\u0275cmp=u({type:o,selectors:[["app-crear-helado"]],outputs:{heladoCreado:"heladoCreado"},standalone:!0,features:[h],decls:23,vars:1,consts:[[3,"ngSubmit","formGroup"],["for","sabor"],["id","sabor","formControlName","sabor"],["for","tipo"],["id","tipo","formControlName","tipo"],["value","agua"],["value","crema"],["for","precio"],["id","precio","type","number","formControlName","precio"],["for","peso"],["id","peso","type","number","formControlName","peso"],["type","submit"]],template:function(r,l){r&1&&(t(0,"form",0),m("ngSubmit",function(){return l.onSubmit()}),t(1,"div")(2,"label",1),n(3,"Sabor:"),e(),_(4,"input",2),e(),t(5,"div")(6,"label",3),n(7,"Tipo:"),e(),t(8,"select",4)(9,"option",5),n(10,"Agua"),e(),t(11,"option",6),n(12,"Crema"),e()()(),t(13,"div")(14,"label",7),n(15,"Precio:"),e(),_(16,"input",8),e(),t(17,"div")(18,"label",9),n(19,"Peso (gramos):"),e(),_(20,"input",10),e(),t(21,"button",11),n(22,"Crear Helado"),e()()),r&2&&p("formGroup",l.form)},dependencies:[$,T,j,A,V,O,P,w,D,k,q],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.cont-alta[_ngcontent-%COMP%]{padding-top:100px}"]});let a=o;return a})();function Y(a,o){if(a&1){let d=E();t(0,"div")(1,"p"),n(2),e(),t(3,"button",1),m("click",function(){S(d);let r=v();return g(r.borrarHelado())}),n(4,"Borrar Helado"),e()()}if(a&2){let d=v();s(2),M("\xBFEstas seguro de que quieres borrar el helado ",d.helado.sabor,"?")}}var W=(()=>{let o=class o{constructor(i){this.firestore=i,this.helado=null,this.heladoBorrado=new b}borrarHelado(){if(this.helado){let i=K(this.firestore,`helados/${this.helado.id}`);J(i).then(()=>{this.heladoBorrado.emit(this.helado.id)})}}};o.\u0275fac=function(r){return new(r||o)(f(H))},o.\u0275cmp=u({type:o,selectors:[["app-borrar-helado"]],inputs:{helado:"helado"},outputs:{heladoBorrado:"heladoBorrado"},standalone:!0,features:[h],decls:1,vars:1,consts:[[4,"ngIf"],[3,"click"]],template:function(r,l){r&1&&x(0,Y,5,1,"div",0),r&2&&p("ngIf",l.helado)},dependencies:[N]});let a=o;return a})();function Z(a,o){if(a&1){let d=E();t(0,"tr",6),m("click",function(){let r=S(d).$implicit,l=v();return g(l.seleccionarHelado(r))}),t(1,"td"),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),e(),t(7,"td"),n(8),e()()}if(a&2){let d=o.$implicit;s(2),C(d.sabor),s(2),C(d.tipo),s(2),C(d.peso),s(2),C(d.precio)}}var Ee=(()=>{let o=class o{onSeleccionHelado(i){this.heladoSeleccionado=i}constructor(i){this.firestore=i,this.helados=[],this.heladoSeleccionado=null}ngOnInit(){this.getHelados()}getHelados(){let i=F(this.firestore,"helados");z(i).subscribe(l=>{this.helados=l})}seleccionarHelado(i){this.heladoSeleccionado=i}onHeladoCreado(i){let r=F(this.firestore,"helados");R(r,i)}onHeladoBorrado(i){this.helados=this.helados.filter(r=>r.id!==i),this.heladoSeleccionado=null}};o.\u0275fac=function(r){return new(r||o)(f(H))},o.\u0275cmp=u({type:o,selectors:[["app-helados"]],standalone:!0,features:[h],decls:22,vars:2,consts:[[1,"table"],[3,"click",4,"ngFor","ngForOf"],[1,"container","d-flex","justify-content-around","mt-5"],[1,"jumbotron"],[3,"heladoCreado"],[3,"heladoBorrado","helado"],[3,"click"]],template:function(r,l){r&1&&(t(0,"table",0)(1,"thead")(2,"tr")(3,"th"),n(4,"Helados"),e(),t(5,"th"),n(6,"Tipo"),e(),t(7,"th"),n(8,"Peso"),e(),t(9,"th"),n(10,"Precio"),e()()(),t(11,"tbody"),x(12,Z,9,4,"tr",1),e()(),t(13,"div",2)(14,"div",3)(15,"h5"),n(16,"Crear helado"),e(),t(17,"app-crear-helado",4),m("heladoCreado",function(y){return l.onHeladoCreado(y)}),e()(),t(18,"div",3)(19,"h5"),n(20,"Borrar helado"),e(),t(21,"app-borrar-helado",5),m("heladoBorrado",function(y){return l.onHeladoBorrado(y)}),e()()()),r&2&&(s(12),p("ngForOf",l.helados),s(9),p("helado",l.heladoSeleccionado))},dependencies:[I,U,W]});let a=o;return a})();export{Ee as HeladosComponent};
