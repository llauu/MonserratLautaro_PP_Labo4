import{d as O}from"./chunk-RWC5NNWA.js";import{a as Q}from"./chunk-67YMBTNG.js";import"./chunk-BV6S3RUB.js";import{a as w,b as p,c as A,d as j,g as M,h as k,i as L,j as G,n as z,o as U,q as $}from"./chunk-CZ6RJV6A.js";import{k as b,l as B,m as H,n as J,o as K,p as x}from"./chunk-SENDHDUF.js";import{$a as s,Aa as m,Ba as c,La as S,Na as u,Pa as R,Qa as o,Ra as n,Sa as d,Ta as T,U as P,Ua as g,Va as y,Z as q,bb as h,ca as v,gb as C,ka as N,la as F,r as E,ra as D,w as _,xa as I,yb as V}from"./chunk-BHUJHJEN.js";function W(i){return e=>{let l=e.value;return i.TraerDniRepartidor(l).pipe(_(t=>t?{dniExiste:"El DNI ya esta registrado"}:null))}}function te(i,e){if(i&1){let l=T();o(0,"li",1),g("click",function(){let r=N(l).$implicit,a=y(2);return F(a.seleccionarPais(r.name.common))}),d(1,"img",2),s(2),n()}if(i&2){let l=e.$implicit;m(),u("src",l.flags.png,I)("alt",l.name.common+" flag"),m(),h(" ",l.name.common," ")}}function ie(i,e){if(i&1&&(o(0,"h2"),s(1,"Listado de Paises"),n(),o(2,"ul"),S(3,te,3,3,"li",0),n()),i&2){let l=y();m(3),u("ngForOf",l.paises)}}function re(i,e){i&1&&(o(0,"p"),s(1,"No se encontraron pa\xEDses."),n())}var Y=(()=>{let e=class e{constructor(t){this.paisesService=t,this.paises=[],this.paisSeleccionado=new D}ngOnInit(){this.paisesService.getPaises().subscribe(t=>{console.log("trayendo"),this.paises=t.filter(r=>r.region==="Africa"||r.region==="Europe").slice(0,3)})}seleccionarPais(t){this.paisSeleccionado.emit(t)}};e.\u0275fac=function(r){return new(r||e)(c(Q))},e.\u0275cmp=v({type:e,selectors:[["app-listado-paises"]],outputs:{paisSeleccionado:"paisSeleccionado"},standalone:!0,features:[C],decls:2,vars:1,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],["width","30",3,"src","alt"]],template:function(r,a){r&1&&S(0,ie,4,1)(1,re,2,0),r&2&&R(0,a.paises.length>0?0:1)},dependencies:[V]});let i=e;return i})();var Z=(()=>{let e=class e{constructor(t){this.firestore=t}TraerDniRepartidor(t){let r=b(this.firestore,"repartidores"),a=B(r,H("dni","==",t));return E(J(a)).pipe(_(f=>!f.empty))}};e.\u0275fac=function(r){return new(r||e)(q(x))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Se=(()=>{let e=class e{constructor(t,r,a,f){this.firestore=t,this.fb=r,this.dniRepartidorService=a,this.router=f}ngOnInit(){this.form=this.fb.group({nombre:["",[p.required]],dni:["",{validators:[p.required],asyncValidators:W(this.dniRepartidorService),updateOn:"blur"}],edad:["",[p.required,p.min(0)]],cap_transporte:["",[p.required,p.min(0)]],pais_origen:["",[p.required]],unidad_propia:[!1]})}actualizarPais(t){this.form.patchValue({pais_origen:t})}get nombreControl(){return this.form.get("nombre")}get dniControl(){return this.form.get("dni")}get edadControl(){return this.form.get("edad")}get capTransporteControl(){return this.form.get("cap_transporte")}get paisOrigenControl(){return this.form.get("pais_origen")}get unidadPropiaControl(){return this.form.get("unidad_propia")?.value}altaRepartidor(){this.form.markAllAsTouched();let t=b(this.firestore,"repartidores");K(t,this.form.value),this.form.reset(),this.router.navigate(["/home"])}};e.\u0275fac=function(r){return new(r||e)(c(x),c(U),c(Z),c(O))},e.\u0275cmp=v({type:e,selectors:[["app-alta-repartidor"]],standalone:!0,features:[C],decls:33,vars:3,consts:[[1,"d-flex","justify-content-center","align-items-center","cont-alta"],[1,"w-25","d-flex"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","formControlName","nombre","id","nombre","name","nombre","required","",1,"form-control"],["for","dni"],["type","number","formControlName","dni","id","dni","name","dni","required","",1,"form-control"],[1,"text-danger"],["for","edad"],["type","number","formControlName","edad","id","edad","name","edad","required","",1,"form-control"],["for","cap_transporte"],["type","number","formControlName","cap_transporte","id","cap_transporte","name","cap_transporte","required","",1,"form-control"],["for","pais_origen"],["type","text","readonly","","formControlName","pais_origen","id","pais_origen","name","pais_origen","required","",1,"form-control"],[1,"form-"],["for","unidad_propia"],["type","checkbox","id","unidad_propia","name","unidad_propia","required","",1,"ms-3"],["type","submit",1,"btn","btn-primary","mt-4",3,"disabled"],[3,"paisSeleccionado"]],template:function(r,a){r&1&&(o(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return a.altaRepartidor()}),o(3,"div",3)(4,"label",4),s(5,"Nombre:"),n(),d(6,"input",5),n(),o(7,"div",3)(8,"label",6),s(9,"DNI:"),n(),d(10,"input",7),o(11,"small",8),s(12),n()(),o(13,"div",3)(14,"label",9),s(15,"Edad:"),n(),d(16,"input",10),n(),o(17,"div",3)(18,"label",11),s(19,"Capacidad de transporte:"),n(),d(20,"input",12),n(),o(21,"div",3)(22,"label",13),s(23,"Pais de origen:"),n(),d(24,"input",14),n(),o(25,"div",15)(26,"label",16),s(27,"Unidad propia:"),n(),d(28,"input",17),n(),o(29,"button",18),s(30,"Dar de alta"),n()(),o(31,"div")(32,"app-listado-paises",19),g("paisSeleccionado",function(ee){return a.actualizarPais(ee)}),n()()()()),r&2&&(m(2),u("formGroup",a.form),m(10),h(" ",a.dniControl==null?null:a.dniControl.getError("dniExiste")," "),m(17),u("disabled",a.form.invalid))},dependencies:[$,M,w,k,A,j,z,L,G,Y],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.cont-alta[_ngcontent-%COMP%]{padding-top:100px}"]});let i=e;return i})();export{Se as AltaRepartidorComponent};
